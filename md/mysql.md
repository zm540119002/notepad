# 注意

## 死锁问题排查

```
参考：https://blog.csdn.net/guanfengliang1988/article/details/80356648
```

总结：

```
不应该存在仅根据非主键的几个字段一查就要update/delete的场景。即使有，也应该改为先把要更新的记录查出来然后逐条按主键id更新。
```

# 知识点

## mysql锁

```
表级锁：锁住整张表
行级锁：锁住一行或者多行
ps: 如果数据库表没有加索引，那么更新操作的时候会锁住整张表，也就是所谓的表级锁；如果有索引，并且查询条件中也带有这些字段，那么就会使用行级锁。行级锁并不是锁记录，而是锁索引。
```

